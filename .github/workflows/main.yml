name: Create confluence page

on:
  push:
    branches:
      - master

jobs:
  get-confluence-data:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Install dependencies
        run: sudo apt-get install -y curl

      - name: Create Page
#         env:
#           CONFLUENCE_API_TOKEN: ${{ secrets.CONFLUENCE_TOKEN }}
#           CONFLUENCE_API_URL: "https://demositefirst.atlassian.net/wiki/rest/api/content"
        run: |
              curl --request POST \
                --url 'https://kanishkpadhi.atlassian.net/wiki/api/v2/pages' \
                --user 'kaniskan@cybage.com:ATATT3xFfGF04gW5hjxdANaNtOVvK6a_Voct_Iiov_p971SeOtNvmGND_JpeNvMOmjw3GnZuwO_D1-IYHdGF-p5WHp-7mpH7GvbTSTPF_GPPjeOGpWFYJnSZnRYD5tEIXSpiD1Rvo2jA6IxJDJwfBbC-qOJdmFAqc2cUsnVlhud4Cg7P8EMKsHg=0B460ED2' \
                --header 'Accept: application/json' \
                --header 'Content-Type: application/json' \
                --data '{
                "spaceId": "33071",
                "status": "current",
                "title": "Hello World!",
                "parentId": "33154",
                "body": {
                  "representation": "storage",
                  "value": "<table><tr><th>Artifact Version</th><th>Date</th></tr><tr><td>'1.0.0'</td><td>'11-May-2023'</td></tr></table>"
                }
              }'
